<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Replies.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">RedRadishes Core</a> &gt; <a href="index.source.html" class="el_package">redradishes.decoder</a> &gt; <span class="el_source">Replies.java</span></div><h1>Replies.java</h1><pre class="source lang-java linenums">package redradishes.decoder;

import redradishes.decoder.parser.ArrayAsMapParser;
import redradishes.decoder.parser.ArrayParser;
import redradishes.decoder.parser.ArrayReplyParser;
import redradishes.decoder.parser.BulkStringParser;
import redradishes.decoder.parser.BulkStringReplyParser;
import redradishes.decoder.parser.CombiningReplyParser;
import redradishes.decoder.parser.IntegerReplyParser;
import redradishes.decoder.parser.ReplyParser;
import redradishes.decoder.parser.ScanReplyParser;
import redradishes.decoder.parser.SimpleStringReplyParser;

import static redradishes.decoder.parser.CharAppendingParser.CHAR_SEQUENCE_PARSER;
import static redradishes.decoder.parser.LongParser.INTEGER_PARSER;
import static redradishes.decoder.parser.LongParser.LONG_PARSER;

<span class="nc" id="L18">public class Replies {</span>

<span class="fc" id="L20">  private static final IntegerReplyParser&lt;Integer&gt; INTEGER_REPLY_PARSER = new IntegerReplyParser&lt;&gt;(INTEGER_PARSER);</span>
<span class="fc" id="L21">  private static final IntegerReplyParser&lt;Long&gt; LONG_REPLY_PARSER = new IntegerReplyParser&lt;&gt;(LONG_PARSER);</span>
<span class="fc" id="L22">  private static final SimpleStringReplyParser&lt;CharSequence&gt; SIMPLE_STRING_REPLY_PARSER =</span>
      new SimpleStringReplyParser&lt;&gt;(CHAR_SEQUENCE_PARSER);

  public static IntegerReplyParser&lt;Integer&gt; integerReply() {
<span class="fc" id="L26">    return INTEGER_REPLY_PARSER;</span>
  }

  public static IntegerReplyParser&lt;Long&gt; longReply() {
<span class="fc" id="L30">    return LONG_REPLY_PARSER;</span>
  }

  public static SimpleStringReplyParser&lt;CharSequence&gt; simpleStringReply() {
<span class="fc" id="L34">    return SIMPLE_STRING_REPLY_PARSER;</span>
  }

  public static &lt;T&gt; BulkStringReplyParser&lt;T&gt; bulkStringReply(BulkStringBuilderFactory&lt;?, ? extends T&gt; builderFactory) {
<span class="fc" id="L38">    return new BulkStringReplyParser&lt;&gt;(len -&gt; new BulkStringParser&lt;&gt;(len, builderFactory));</span>
  }

  public static &lt;E, T&gt; ArrayReplyParser&lt;T&gt; arrayReply(ArrayBuilderFactory&lt;E, ? extends T&gt; arrayBuilderFactory,
      BulkStringBuilderFactory&lt;?, ? extends E&gt; elementBuilderFactory) {
<span class="fc" id="L43">    ReplyParser&lt;E&gt; elementParser = bulkStringReply(elementBuilderFactory);</span>
<span class="fc" id="L44">    return new ArrayReplyParser&lt;&gt;(len -&gt; new ArrayParser&lt;&gt;(len, arrayBuilderFactory, elementParser));</span>
  }

  public static &lt;K, V, T&gt; ArrayReplyParser&lt;T&gt; mapReply(MapBuilderFactory&lt;K, V, ? extends T&gt; arrayBuilderFactory,
      BulkStringBuilderFactory&lt;?, ? extends K&gt; keyBuilderFactory,
      BulkStringBuilderFactory&lt;?, ? extends V&gt; valueBuilderFactory) {
<span class="fc" id="L50">    CombiningReplyParser&lt;K, V&gt; kvParser =</span>
<span class="fc" id="L51">        CombiningReplyParser.combine(bulkStringReply(keyBuilderFactory), bulkStringReply(valueBuilderFactory));</span>
<span class="fc" id="L52">    return new ArrayReplyParser&lt;&gt;(len -&gt; new ArrayAsMapParser&lt;&gt;(len / 2, arrayBuilderFactory, kvParser));</span>
  }

  public static &lt;E, T&gt; ScanReplyParser&lt;T&gt; scanReply(ArrayBuilderFactory&lt;E, ? extends T&gt; arrayBuilderFactory,
      BulkStringBuilderFactory&lt;?, ? extends E&gt; elementBuilderFactory) {
<span class="fc" id="L57">    ReplyParser&lt;E&gt; elementParser = bulkStringReply(elementBuilderFactory);</span>
<span class="fc" id="L58">    return new ScanReplyParser&lt;&gt;(len -&gt; new ArrayParser&lt;&gt;(len, arrayBuilderFactory, elementParser));</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>